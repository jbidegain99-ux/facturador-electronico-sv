# ============================================================================
# FACTURADOR ELECTRÓNICO SV - VARIABLES DE ENTORNO
# ============================================================================
# Este archivo documenta todas las variables de entorno necesarias.
# Las variables reales están configuradas en Azure App Service.
# NO agregues valores reales aquí - solo úsalo como referencia.
# ============================================================================

# ============================================================================
# BASE DE DATOS (Azure SQL Server)
# ============================================================================
# Connection string para Azure SQL Database
# Formato: sqlserver://SERVER:PORT;database=DATABASE;user=USER;password=PASSWORD;encrypt=true;trustServerCertificate=false
DATABASE_URL="sqlserver://your-server.database.windows.net:1433;database=facturador-db;user=admin;password=***;encrypt=true"

# ============================================================================
# AUTENTICACIÓN Y SEGURIDAD
# ============================================================================
# Secret para firma de tokens JWT (debe ser una string aleatoria de 64+ caracteres)
JWT_SECRET="your-super-secret-jwt-key-change-this-in-production"

# Key para encriptar datos sensibles en base de datos (contraseñas de email, certificados)
ENCRYPTION_KEY="your-encryption-key-32-chars-min"

# ============================================================================
# INTEGRACIÓN CON MINISTERIO DE HACIENDA
# ============================================================================
# Ambiente de la API del Ministerio: "TEST" o "PRODUCTION"
MH_API_ENV="TEST"

# URL base de la API del Ministerio (se configura automáticamente según MH_API_ENV)
# TEST: https://apitest.dtes.mh.gob.sv/seguridad
# PROD: https://api.dtes.mh.gob.sv/seguridad
# MH_API_URL="https://apitest.dtes.mh.gob.sv"

# ============================================================================
# SERVIDOR
# ============================================================================
# Puerto en el que corre el servidor NestJS (Azure usa WEBSITES_PORT)
PORT=3000

# Origen permitido para CORS (frontend URL)
CORS_ORIGIN="https://facturador-web-sv.azurewebsites.net"

# ============================================================================
# REDIS (Para BullMQ - Opcional en FASE 0)
# ============================================================================
# Connection string de Redis para colas asíncronas
# Necesario para FASE 2 (Facturación Recurrente) y FASE 3 (Webhooks)
# REDIS_URL="redis://localhost:6379"

# ============================================================================
# AZURE STORAGE (Para uploads de archivos - Opcional en FASE 0)
# ============================================================================
# Connection string de Azure Blob Storage para almacenar certificados y uploads
# AZURE_STORAGE_CONNECTION_STRING="DefaultEndpointsProtocol=https;AccountName=..."

# ============================================================================
# EMAIL (Para notificaciones - Opcional en FASE 0)
# ============================================================================
# Configuración de SMTP para envío de emails del sistema
# SMTP_HOST="smtp.sendgrid.net"
# SMTP_PORT=587
# SMTP_SECURE=true
# SMTP_USER="apikey"
# SMTP_PASSWORD="SG.xxx"
# SMTP_FROM_EMAIL="noreply@facturoelectronicosv.com"
# SMTP_FROM_NAME="Facturador Electrónico SV"

# ============================================================================
# DOCKER (Solo para deployments - Azure maneja esto automáticamente)
# ============================================================================
# Estas variables las configura Azure automáticamente
# DOCKER_REGISTRY_SERVER_URL="https://index.docker.io/v1"
# DOCKER_REGISTRY_SERVER_USERNAME="xxx"
# DOCKER_REGISTRY_SERVER_PASSWORD="xxx"

# ============================================================================
# AZURE APP SERVICE (Configuradas automáticamente por Azure)
# ============================================================================
# Puerto que Azure expone para la aplicación
# WEBSITES_PORT=3000
# WEBSITES_ENABLE_APP_SERVICE_STORAGE=false
# WEBSITE_HTTPLOGGING_RETENTION_DAYS=3

# ============================================================================
# LOGGING Y MONITOREO
# ============================================================================
# Nivel de logs: "error", "warn", "info", "debug", "verbose"
# LOG_LEVEL="info"

# Habilitar logs detallados de Prisma
# PRISMA_LOG_QUERIES=false

# ============================================================================
# FEATURE FLAGS (Para habilitar módulos nuevos progresivamente)
# ============================================================================
# Estas se agregarán en las siguientes fases
# ENABLE_CATALOG_MODULE=false          # FASE 1
# ENABLE_DATA_IMPORT=false             # FASE 1
# ENABLE_RECURRING_INVOICES=false      # FASE 2
# ENABLE_ACCOUNTING_MODULE=false       # FASE 2
# ENABLE_QUOTES=false                  # FASE 3
# ENABLE_WEBHOOKS=false                # FASE 3

# ============================================================================
# NOTAS IMPORTANTES
# ============================================================================
# 1. Este proyecto usa Turborepo: apps/api/ y apps/web/
# 2. Base de datos: Azure SQL Server (NO PostgreSQL)
# 3. Variables están en Azure App Service Configuration
# 4. Para desarrollo local: copia este archivo a apps/api/.env y completa
# 5. NUNCA commitees el archivo .env con valores reales a Git
